{"version":3,"sources":["all.js"],"names":["firebaseConfig","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","firebase","initializeApp","db","firestore","products","collection","stores","productCategory","storeCategory","render","document","querySelector","where","orderBy","onSnapshot","querySnapshot","str","forEach","item","product","data","imgUrl","title","price","innerHTML","storeArr","categoryObj","store","category","push","Object","values","flat","Infinity","renderStoreList","tel","time","address","$","ready","on","slideToggle","event","preventDefault","parent","addClass","siblings","removeClass","html","value"],"mappings":"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","file":"all.js","sourcesContent":["\"use strict\"; // 寫了才能正常運行 jQuery\n\n// Firebase configuration\nconst firebaseConfig = {\n  apiKey: \"AIzaSyDGSMcP5U44-K3qE0Y5lt77k4Bcq5sVKtU\",\n  authDomain: \"chan-sushi.firebaseapp.com\",\n  projectId: \"chan-sushi\",\n  storageBucket: \"chan-sushi.appspot.com\",\n  messagingSenderId: \"373508304619\",\n  appId: \"1:373508304619:web:6aa5d730627f26955a58ae\",\n  measurementId: \"G-F6FLCKX6C1\"\n};\n\n// 初始化 Firebase\nfirebase.initializeApp(firebaseConfig);\nconst db = firebase.firestore();\nconst products = db.collection('menu');\nconst stores = db.collection('stores');\nlet productCategory = '握壽司';\nlet storeCategory = '尋找最近的店舖';\n\n// 渲染畫面\nfunction render(){\n  if(document.querySelector('#product-list')){\n  // 產品列表頁\n    products.where('category','==',productCategory).orderBy('price').onSnapshot(querySnapshot => {\n      let str = '';\n      querySnapshot.forEach(item => {\n        const product = item.data();\n        str+=`\n        <div class=\"col-4\">\n          <div class=\"card border-0\">\n            <img src=\"${product.imgUrl}\" alt=\"${product.title}\" class=\"card-img\">\n            <div class=\"card-body\">\n              <h3 class=\"card-title mb-0\">${product.title}</h3>\n              <p class=\"text-center font-2\">${product.price} 元</p>\n            </div>\n          </div>\n        </div>\n        `\n        document.querySelector('#product-list').innerHTML = str;\n      });\n    }); \n  }else if(document.querySelector('#store-list')){\n  // 店舖列表頁\n    let storeArr = [];\n    if(storeCategory === '尋找最近的店舖'){\n      stores.onSnapshot(querySnapshot=>{\n        // 店舖照地區北至南順序排列，先分類成物件裡的陣列，再取出放到 storeArr 渲染\n        const categoryObj = {\n          '台北':[],\n          '新北':[],\n          '台中':[],\n          '台南':[],\n          '高雄':[],\n        };\n        querySnapshot.forEach(item => {\n          const store = item.data();\n          categoryObj[store.category].push(store);\n        });\n        storeArr = Object.values(categoryObj).flat(Infinity);\n        renderStoreList(storeArr);\n      })\n    }else{\n      stores.where('category','==',storeCategory).onSnapshot(querySnapshot =>{\n        querySnapshot.forEach(item => {\n          storeArr.push(item.data());\n        });\n        renderStoreList(storeArr);\n      })\n    }\n  }\n}\nfunction renderStoreList(storeArr){\n  let str = '';\n  storeArr.forEach(store => {\n    str+=`\n    <div class=\"col-lg-4 mb-6\">\n      <div class=\"card\">\n        <img src=\"${store.imgUrl}\" alt=\"${store.category}${store.title}店\" class=\"card-img\">\n        <div class=\"card-body\">\n          <h3 class=\"card-title\">${store.category}${store.title}店</h3>\n          <ul>\n            <li class=\"mb-2\">\n              <i class=\"bi bi-telephone-fill\"></i>\n              <span class=\"ml-1\">${store.tel}</span>\n            </li>\n            <li class=\"mb-2\">\n              <i class=\"bi bi-clock-fill\"></i>\n              <span class=\"ml-1\">${store.time[0]}:00 ~ ${store.time[1]}:00</span>\n            </li>\n            <li>\n              <i class=\"bi bi-pin-angle-fill\"></i>\n              <span class=\"ml-1\">${store.address}</span>\n            </li>\n          </ul>\n        </div>\n        <div class=\"card-footer\">\n          <a href=\"#\" class=\"btn btn-secondary-light\">立即訂位</a>\n          <a href=\"#\" class=\"btn btn-outline-secondary-light ml-2\">外送點餐</a>\n        </div>\n      </div>\n    </div>\n    `\n  })\n  document.querySelector('#store-list').innerHTML = str;\n}\n\n$(document).ready(function () {\n  render();\n  // 漢堡選單\n  $('#collapse-navbar-btn').on('click', function(){\n    $('#collapse-navbar-menu').slideToggle();\n  })\n  // 點選列表，被點到的加上 active class\n  $('.nav-link').on('click',function(event){\n    event.preventDefault(); \n    $(this).parent().addClass('active');\n    $(this).parent().siblings().removeClass('active');\n    // 如果是產品列表頁，要秀出對應資料\n    if(document.querySelector('#product-list')){\n      $('#product-list-title').html($(this)[0].innerHTML);\n      productCategory = $(this)[0].innerHTML;\n    }\n    render();\n  })\n  // 點選店舖 select ，秀出對應資料\n  $('#search-store-btn').on('click',function(){\n    storeCategory = $(this).siblings()[0].value;\n    render();\n  })\n});\n\n"]}